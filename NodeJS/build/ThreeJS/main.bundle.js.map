{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///delegated ./node_modules/three/build/three.module.js from dll-reference vendor_9b384ce89482150869b3","webpack:///external \"vendor_9b384ce89482150869b3\"","webpack:///delegated ./node_modules/three-text2d/lib/index.js from dll-reference vendor_9b384ce89482150869b3","webpack:///delegated ./node_modules/three-orbitcontrols/OrbitControls.js from dll-reference vendor_9b384ce89482150869b3","webpack:///./node_modules/stats-js/build/stats.min.js","webpack:///delegated ./node_modules/three-gltf-loader/index.js from dll-reference vendor_9b384ce89482150869b3","webpack:///./js/keyboard.js","webpack:///./js/scene.js","webpack:///./js/threejs.js","webpack:///./js/Robot.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vendor_9b384ce89482150869b3","document","createElement","e","appendChild","dom","children","length","style","display","cssText","addEventListener","preventDefault","performance","Date","now","a","f","Panel","self","memory","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","Math","round","window","devicePixelRatio","u","h","y","width","height","v","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","min","max","drawImage","KeyboardState","onKeyDown","onKeyUp","k","8","9","13","16","17","18","27","32","33","34","35","36","37","38","39","40","45","46","186","187","188","189","190","191","219","220","221","222","status","keyName","keyCode","String","fromCharCode","event","pressed","down","up","updatedPreviously","debug","list","arg","console","log","scene","keyboard","stats","allUser","renderer","camera","clock","sun","Robot","modelGLTF","needText","Robot_classCallCheck","angle","pos","THREE","body","text","SpriteText2D","align","textAlign","center","scale","set","position","add","lookAt","actions","mixer","states","emotes","animations","clip","action","clipAction","indexOf","clampWhenFinished","loop","activeAction","play","traverse","child","castShadow","dt","copy","rotation","actionName","previousAction","fadeToAction","x","z","duration","fadeOut","reset","setEffectiveTimeScale","setEffectiveWeight","fadeIn","socket","parent","id","ID","allModel","innerWidth","innerHeight","aspect","updateProjectionMatrix","setSize","AllLoaderPromise","push","Promise","resolve","reject","GLTFLoader","load","gltf","xhr","loaded","total","error","animate","getDelta","emit","msg","allPlayerData","updateByServer","allGameData","undefined","userNum","remove","forEach","requestAnimationFrame","render","all","then","response","background","Stats","top","zIndex","ambient","shadowMap","enabled","shadow","mapSize","left","bottom","right","far","bias","plane","PI","receiveShadow","j","init","catch"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = (__webpack_require__(1))(0);","module.exports = vendor_9b384ce89482150869b3;","module.exports = (__webpack_require__(1))(5);","module.exports = (__webpack_require__(1))(4);","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){\"use strict\";var c=function(){var n=0,l=document.createElement(\"div\");function e(e){return l.appendChild(e.dom),e}function t(e){for(var t=0;t<l.children.length;t++)l.children[t].style.display=t===e?\"block\":\"none\";n=e}l.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\",l.addEventListener(\"click\",function(e){e.preventDefault(),t(++n%l.children.length)},!1);var i=(performance||Date).now(),a=i,o=0,f=e(new c.Panel(\"FPS\",\"#0ff\",\"#002\")),r=e(new c.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var d=e(new c.Panel(\"MB\",\"#f08\",\"#201\"));return t(0),{REVISION:16,dom:l,addPanel:e,showPanel:t,begin:function(){i=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(r.update(e-i,200),a+1e3<=e&&(f.update(1e3*o/(e-a),100),a=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:l,setMode:t}};return c.Panel=function(n,l,i){var a=1/0,o=0,f=Math.round,r=f(window.devicePixelRatio||1),d=80*r,e=48*r,c=3*r,p=2*r,u=3*r,s=15*r,m=74*r,h=30*r,y=document.createElement(\"canvas\");y.width=d,y.height=e,y.style.cssText=\"width:80px;height:48px\";var v=y.getContext(\"2d\");return v.font=\"bold \"+9*r+\"px Helvetica,Arial,sans-serif\",v.textBaseline=\"top\",v.fillStyle=i,v.fillRect(0,0,d,e),v.fillStyle=l,v.fillText(n,c,p),v.fillRect(u,s,m,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u,s,m,h),{dom:y,update:function(e,t){a=Math.min(a,e),o=Math.max(o,e),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,d,s),v.fillStyle=l,v.fillText(f(e)+\" \"+n+\" (\"+f(a)+\"-\"+f(o)+\")\",c,p),v.drawImage(y,u+r,s,m-r,h,u,s,m-r,h),v.fillRect(u+m-r,s,r,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u+m-r,s,r,f((1-e/t)*h))}}},c});\n","module.exports = (__webpack_require__(1))(9);","/**\r\n * @author Lee Stemkoski\r\n *\r\n * Usage:\r\n * (1) create a global variable:\r\n *      var keyboard = new KeyboardState();\r\n * (2) during main loop:\r\n *       keyboard.update();\r\n * (3) check state of keys:\r\n *       keyboard.down(\"A\")    -- true for one update cycle after key is pressed\r\n *       keyboard.pressed(\"A\") -- true as long as key is being pressed\r\n *       keyboard.up(\"A\")      -- true for one update cycle after key is released\r\n *\r\n *  See KeyboardState.k object data below for names of keys whose state can be polled\r\n */\r\n\r\n// initialization\r\nvar KeyboardState = function()\r\n{\r\n    // bind keyEvents\r\n    document.addEventListener(\"keydown\", KeyboardState.onKeyDown, false);\r\n    document.addEventListener(\"keyup\",   KeyboardState.onKeyUp,   false);\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\nKeyboardState.k =\r\n    {\r\n        8: \"backspace\",  9: \"tab\",       13: \"enter\",    16: \"shift\",\r\n        17: \"ctrl\",     18: \"alt\",       27: \"esc\",      32: \"space\",\r\n        33: \"pageup\",   34: \"pagedown\",  35: \"end\",      36: \"home\",\r\n        37: \"left\",     38: \"up\",        39: \"right\",    40: \"down\",\r\n        45: \"insert\",   46: \"delete\",   186: \";\",       187: \"=\",\r\n        188: \",\",      189: \"-\",        190: \".\",       191: \"/\",\r\n        219: \"[\",      220: \"\\\\\",       221: \"]\",       222: \"'\"\r\n    }\r\n\r\nKeyboardState.status = {};\r\n\r\nKeyboardState.keyName = function ( keyCode )\r\n{\r\n    return ( KeyboardState.k[keyCode] != null ) ?\r\n        KeyboardState.k[keyCode] :\r\n        String.fromCharCode(keyCode);\r\n}\r\n\r\nKeyboardState.onKeyUp = function(event)\r\n{\r\n    event.preventDefault();\r\n    var key = KeyboardState.keyName(event.keyCode);\r\n    if ( KeyboardState.status[key] )\r\n        KeyboardState.status[key].pressed = false;\r\n}\r\n\r\nKeyboardState.onKeyDown = function(event)\r\n{\r\n    event.preventDefault();\r\n    var key = KeyboardState.keyName(event.keyCode);\r\n    if ( !KeyboardState.status[key] )\r\n        KeyboardState.status[key] = { down: false, pressed: false, up: false, updatedPreviously: false };\r\n}\r\n\r\nKeyboardState.prototype.update = function()\r\n{\r\n    for (var key in KeyboardState.status)\r\n    {\r\n        // insure that every keypress has \"down\" status exactly once\r\n        if ( !KeyboardState.status[key].updatedPreviously )\r\n        {\r\n            KeyboardState.status[key].down        \t\t= true;\r\n            KeyboardState.status[key].pressed     \t\t= true;\r\n            KeyboardState.status[key].updatedPreviously = true;\r\n        }\r\n        else // updated previously\r\n        {\r\n            KeyboardState.status[key].down = false;\r\n        }\r\n\r\n        // key has been flagged as \"up\" since last update\r\n        if ( KeyboardState.status[key].up )\r\n        {\r\n            delete KeyboardState.status[key];\r\n            continue; // move on to next key\r\n        }\r\n\r\n        if ( !KeyboardState.status[key].pressed ) // key released\r\n            KeyboardState.status[key].up = true;\r\n    }\r\n}\r\n\r\nKeyboardState.prototype.down = function(keyName)\r\n{\r\n    return (KeyboardState.status[keyName] && KeyboardState.status[keyName].down);\r\n}\r\n\r\nKeyboardState.prototype.pressed = function(keyName)\r\n{\r\n    return (KeyboardState.status[keyName] && KeyboardState.status[keyName].pressed);\r\n}\r\n\r\nKeyboardState.prototype.up = function(keyName)\r\n{\r\n    return (KeyboardState.status[keyName] && KeyboardState.status[keyName].up);\r\n}\r\n\r\nKeyboardState.prototype.debug = function()\r\n{\r\n    var list = \"Keys active: \";\r\n    for (var arg in KeyboardState.status)\r\n        list += \" \" + arg\r\n    console.log(list);\r\n}\r\n\r\nexport default KeyboardState\r\n\r\n///////////////////////////////////////////////////////////////////////////////","import * as THREE from 'three'\r\nimport KeyboardState from './keyboard.js'\r\n\r\nvar scene,keyboard;\r\n\r\nfunction initScene() {\r\n    scene = new THREE.Scene();\r\n    keyboard = new KeyboardState();\r\n}\r\n\r\nexport {scene,initScene,keyboard}","import * as THREE from 'three'\r\nimport OrbitControls from 'three-orbitcontrols'\r\nimport Stats from 'stats-js'\r\nimport {scene, initScene, keyboard} from './scene.js'\r\nimport {Car} from './Car.js'\r\nimport GLTFLoader from 'three-gltf-loader'\r\nimport {Robot} from \"./Robot.js\";\r\n\r\nvar socket = parent.socket, stats, modelGLTF = [],allUser,id = parent.ID;\r\n\r\n//-----------------------three js-------------------------\r\n\r\nvar renderer,camera,controls,clock,sun,allModel = [],model;\r\nwindow.addEventListener('resize', onWindowResize, false);\r\nlet getInitDataPromise = () => {\r\n    return new Promise(resolve => {\r\n        socket.emit('initClient',{},(msg) => {\r\n            console.log('socket init complete');\r\n            allUser = msg;\r\n            resolve();\r\n        });\r\n    });\r\n};\r\n\r\nlet AllLoaderPromise = [];\r\nfor(let i = 0; i < 10; i++){\r\n    AllLoaderPromise.push(\r\n        new Promise((resolve, reject) => {\r\n            var loader = new GLTFLoader();\r\n            loader.load('/model/RobotExpressive.glb', (gltf) => {\r\n                console.log('complete loader');\r\n                resolve(gltf);\r\n            }, (xhr) => {\r\n                console.log((xhr.loaded / xhr.total * 100) + '% loaded');\r\n            }, (error) => {\r\n                reject(error);\r\n            });\r\n        })\r\n    );\r\n}\r\n\r\nPromise.all(AllLoaderPromise).then(getInitDataPromise()).then((response) => {\r\n    modelGLTF = response;\r\n    init();\r\n    animate();\r\n}).catch((error) => console.log(error));\r\n\r\nfunction init() {\r\n    initScene();\r\n\r\n    scene.background = new THREE.Color(0x888888);\r\n    clock = new THREE.Clock();\r\n\r\n    stats = new Stats();\r\n    stats.domElement.style.position = 'absolute';\r\n    stats.domElement.style.top = '0px';\r\n\r\n    stats.domElement.style.zIndex = 100;\r\n    document.body.appendChild(stats.domElement);\r\n\r\n    renderer = new THREE.WebGLRenderer({ambient: true});\r\n    renderer.setSize(window.innerWidth,window.innerHeight);\r\n    renderer.shadowMap.enabled = true;\r\n    document.body.appendChild(renderer.domElement);\r\n\r\n    scene.add(new THREE.GridHelper(500,50,'red','white'));\r\n\r\n\r\n    camera = new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,1000);\r\n\r\n    sun = new THREE.DirectionalLight(0xffffff);\r\n    sun.position.set(500,300,500);\r\n    sun.castShadow = true;\r\n    sun.shadow.mapSize.width = sun.shadow.mapSize.height = 2048;\r\n    sun.shadow.camera.left = sun.shadow.camera.bottom = -500;\r\n    sun.shadow.camera.right = sun.shadow.camera.top = 500;\r\n    sun.shadow.camera.far = 3000;\r\n    sun.shadow.bias = 0.5;\r\n\r\n    scene.add(sun,new THREE.AmbientLight(0x222222));\r\n\r\n    let plane = new THREE.Mesh(new THREE.PlaneGeometry(500,500),new THREE.MeshPhongMaterial());\r\n    plane.rotation.x = -Math.PI / 2;\r\n    plane.receiveShadow = true;\r\n\r\n    scene.add(plane);\r\n/*\r\n    controls = new OrbitControls(camera,renderer.domElement);\r\n    controls.enableKeys = false;*/\r\n\r\n    for(let i = 0, j = 0; i < allUser.allPlayerData.length; i++){\r\n        console.log(allUser.allPlayerData.length);\r\n        if(allUser.allPlayerData[i] !== undefined) {\r\n            console.log(allUser);\r\n            if(i !== id)\r\n                allModel[i] = new Robot(modelGLTF[j],allUser.allPlayerData[i].name,undefined);\r\n            else\r\n                allModel[i] = new Robot(modelGLTF[j],'',camera);\r\n            j++;\r\n        }\r\n    }\r\n\r\n    //model = new Robot(modelGLTF[0]);\r\n}\r\n\r\nfunction animate() {\r\n    keyboard.update();\r\n    stats.update();\r\n\r\n    var dt = clock.getDelta();\r\n\r\n    if(keyboard.pressed('W'))\r\n        socket.emit('Client_pressed_W',{ID: id});\r\n    if(keyboard.pressed('A'))\r\n        socket.emit('Client_pressed_A',{ID: id});\r\n    if(keyboard.pressed('S'))\r\n        socket.emit('Client_pressed_S',{ID: id});\r\n    if(keyboard.pressed('D'))\r\n        socket.emit('Client_pressed_D',{ID: id});\r\n    if(keyboard.down('Q'))\r\n        socket.emit('Client_down_Q',{ID: id});\r\n\r\n    if(keyboard.down('shift'))\r\n        socket.emit('Client_down_shift',{ID: id});\r\n    if(keyboard.up('shift'))\r\n        socket.emit('Client_up_shift',{ID: id});\r\n\r\n    socket.emit('Client_update',{ID: id},(msg) => {\r\n        for(let i = 0; i < msg.allPlayerData.length ; i++){\r\n            console.log(msg);\r\n            if(allModel[i] && msg.allPlayerData[i])\r\n                allModel[i].updateByServer(msg.allGameData[i].pos,msg.allGameData[i].angle,msg.allGameData[i].actionName);\r\n            else if(msg.allPlayerData[i] && allModel[i] === undefined){          //新玩家加入\r\n                allModel[i] = new Robot(modelGLTF[parent.userNum++],msg.allPlayerData[i].name,undefined);\r\n                allModel[i].updateByServer(msg.allGameData[i].pos,msg.allGameData[i].angle,msg.allGameData[i].actionName);\r\n            }\r\n            else if(msg.allPlayerData[i] === null && allModel[i]){           //玩家離開\r\n                scene.remove(allModel[i].body);\r\n                allModel[i] = undefined;\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n\r\n    allModel.forEach((e) => {\r\n        if(e) e.update(dt);\r\n    });\r\n\r\n    requestAnimationFrame(animate);\r\n    render();\r\n}\r\n\r\nfunction render() {\r\n    renderer.render(scene,camera);\r\n}\r\n\r\nfunction onWindowResize() {\r\n    var width = window.innerWidth;\r\n    var height = window.innerHeight;\r\n    camera.aspect = width / height;\r\n    camera.updateProjectionMatrix();\r\n    renderer.setSize(width, height);\r\n}","import * as THREE from 'three'\r\nimport {scene,keyboard} from './scene.js'\r\nimport {SpriteText2D, textAlign} from 'three-text2d'\r\n\r\nclass Robot{\r\n    constructor(modelGLTF,needText,camera) {\r\n        this.angle = 0.0;\r\n        this.pos = new THREE.Vector3(0,0,0);\r\n        this.body = modelGLTF.scene;\r\n\r\n\r\n        if(needText !== ''){\r\n            this.text = new SpriteText2D(needText,{align: textAlign.center, font:'40px Arial', fillStyle: '#ff0000'});\r\n            this.text.scale.set(0.01,0.01,0.01);\r\n            this.text.position.y = 5;\r\n            this.body.add(this.text);\r\n        }\r\n\r\n\r\n        if(camera){\r\n            camera.position.set(0,5,-20);\r\n            camera.lookAt(new THREE.Vector3());\r\n            this.body.add(camera);\r\n        }\r\n\r\n        this.actions = {};\r\n        this.mixer = new THREE.AnimationMixer(modelGLTF.scene);\r\n\r\n        this.states = [ 'Idle', 'Walking', 'Running', 'Dance', 'Death', 'Sitting', 'Standing' ];\r\n        this.emotes = [ 'Jump', 'Yes', 'No', 'Wave', 'Punch', 'ThumbsUp' ];\r\n\r\n        for(let i = 0; i < modelGLTF.animations.length; i++){\r\n            let clip = modelGLTF.animations[i];\r\n            let action = this.mixer.clipAction(clip);\r\n            this.actions[clip.name] =  action;\r\n\r\n            if(this.emotes.indexOf(clip.name) >= 0 || this.states.indexOf(clip.name) >= 4){\r\n                action.clampWhenFinished = true;\r\n                action.loop = THREE.LoopOnce;\r\n            }\r\n        }\r\n\r\n        this.activeAction = this.actions['Idle'];\r\n        this.activeAction.play();\r\n\r\n        //this.body.add(new THREE.AxisHelper(15));\r\n        this.body.scale.set(5,5,5);\r\n        this.body.traverse((child) => {\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = true;\r\n            }\r\n        });\r\n\r\n        scene.add(this.body);\r\n    }\r\n\r\n    update(dt){\r\n        this.mixer.update(dt);\r\n\r\n        this.body.position.copy(this.pos);\r\n        this.body.rotation.y = this.angle;\r\n    }\r\n\r\n    updateByServer(pos,angle,actionName){\r\n        if(this.previousAction !== this.actions[actionName])\r\n            this.fadeToAction(actionName,0.5);\r\n        this.pos.set(pos.x,pos.y,pos.z);\r\n        this.angle = angle;\r\n    }\r\n\r\n    fadeToAction(name,duration){\r\n        this.previousAction = this.activeAction;\r\n        this.activeAction = this.actions[ name ];\r\n        this.previousAction.fadeOut( duration );\r\n\r\n        this.activeAction\r\n            .reset()\r\n            .setEffectiveTimeScale( 1 )\r\n            .setEffectiveWeight( 1 )\r\n            .fadeIn( duration )\r\n            .play();\r\n    }\r\n}\r\n\r\nexport {Robot}"],"sourceRoot":""}