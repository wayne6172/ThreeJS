{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///delegated ./node_modules/three/build/three.module.js from dll-reference vendor_4dfd63c730cb4831af84","webpack:///external \"vendor_4dfd63c730cb4831af84\"","webpack:///delegated ./node_modules/three-orbitcontrols/OrbitControls.js from dll-reference vendor_4dfd63c730cb4831af84","webpack:///./Hw1/initScene.js","webpack:///./Hw1/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vendor_4dfd63c730cb4831af84","scene","renderer","camera","car","ground","light","plane","clock","mat","g1","g11","g12","g2","g3","speed","THREE","setSize","window","innerWidth","innerHeight","setClearColor","document","body","appendChild","domElement","position","set","OrbitControls","add","geo","vertices","push","face3","faces","computeBoundingSphere","computeFaceNormals","color","buildBody","side","clone","Math","sqrt","rotation","x","PI","y","atan2","shadowMap","enabled","type","castShadow","shadow","mapSize","width","height","left","top","right","bottom","near","far","bias","receiveShadow","traverse","e","animate","dt","getDelta","val","multiplyScalar","z","requestAnimationFrame","render"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,kBClFrDhC,EAAOD,QAAWF,EAAoB,EAArB,CAAyB,I,cCA1CG,EAAOD,QAAUkC,6B,gBCAjBjC,EAAOD,QAAWF,EAAoB,EAArB,CAAyB,I,wCCEtCqC,E,WCEAC,EAASC,EAAgBC,EAAIC,EAAOC,EAAMC,EAC1CC,EA+GIH,EACAI,EACAC,EACAC,EACAC,EACAC,EACAC,E,gBArHEC,EAAQ,GDAdd,EAAQ,IAAIe,QCOZR,EAAQ,IAAIQ,SAEZd,EAAW,IAAIc,iBACNC,QAAQC,OAAOC,WAAWD,OAAOE,aAC1ClB,EAASmB,cAAc,SACvBC,SAASC,KAAKC,YAAYtB,EAASuB,aAEnCtB,EAAS,IAAIa,oBAAwB,GAAGE,OAAOC,WAAaD,OAAOE,YAAY,GAAG,MAC3EM,SAASC,IAAI,GAAG,GAAG,IAEf,IAAIC,IAAczB,EAAOD,EAASuB,YAE7CxB,EAAM4B,IAAI,IAAIb,aAAiB,IAAI,GAAG,MAAM,WAE5CZ,EA6DJ,WACI,IAAI0B,EAAM,IAAId,WACdc,EAAIC,SAASC,KACT,IAAIhB,UAAc,EAAE,GAAG,GACvB,IAAIA,UAAc,EAAE,EAAE,GACtB,IAAIA,UAAc,EAAE,EAAE,GACtB,IAAIA,WAAe,EAAE,EAAE,IAG3B,IAAIiB,EAAQ,IAAIjB,QAAY,EAAE,EAAE,GAgBhC,OAfAc,EAAII,MAAMF,KAAKC,GACfA,EAAQ,IAAIjB,QAAY,EAAE,EAAE,GAC5Bc,EAAII,MAAMF,KAAKC,GACfA,EAAQ,IAAIjB,QAAY,EAAE,EAAE,GAC5Bc,EAAII,MAAMF,KAAKC,GACfA,EAAQ,IAAIjB,QAAY,EAAE,EAAE,GAC5Bc,EAAII,MAAMF,KAAKC,GAEfH,EAAIK,wBACJL,EAAIM,qBAGO,IAAIpB,OAAWc,EAAI,IAAId,oBAAwB,CAACqB,MAAO,YAnF5DC,IACFT,IAAI,IAAIb,aAAiB,KAC7Bf,EAAM4B,IAAIzB,GAwFNC,EAAS,IAAIW,WACbP,EAAM,IAAIO,oBAAwB,CAACqB,MAAO,SAAUE,KAAMvB,eAC1DN,EAAK,IAAIM,OAAW,IAAIA,gBAAoB,GAAG,IAAIP,GACnDE,EAAMD,EAAG8B,QACT5B,EAAMF,EAAG8B,QACT3B,EAAK,IAAIG,OAAW,IAAIA,gBAAoByB,KAAKC,KAAK,KAAa,IAAIjC,GACvEK,EAAK,IAAIE,OAAW,IAAIA,gBAAoByB,KAAKC,KAAK,KAAa,IAAIjC,GAE3EC,EAAGgB,SAASC,KAAK,GAAG,EAAE,GACtBhB,EAAIe,SAASC,KAAK,GAAG,GAAG,GACxBf,EAAIc,SAASC,KAAK,GAAG,EAAE,GACvBd,EAAGa,SAASC,KAAK,GAAG,EAAE,GACtBb,EAAGY,SAASC,KAAK,GAAG,EAAE,GAEtBjB,EAAGiC,SAASC,EAAIjC,EAAIgC,SAASC,EAAIhC,EAAI+B,SAASC,EAC1C/B,EAAG8B,SAASC,EAAI9B,EAAG6B,SAASC,GAAKH,KAAKI,GAAK,EAC/ChC,EAAG8B,SAASG,GAAKL,KAAKM,MAAM,GAAG,IAC/BjC,EAAG6B,SAASG,GAAKL,KAAKM,MAAM,GAAG,IAE/B1C,EAAOwB,IAAInB,EAAGC,EAAIC,EAAIC,EAAGC,GAxGzBT,EAyGOA,EAxGPJ,EAAM4B,IAAIxB,IAEVE,EAAQ,IAAIS,OAAW,IAAIA,gBAAoB,IAAI,KAAK,IAAIA,oBAAwB,CAACqB,MAAO,aACtFM,SAASC,GAAKH,KAAKI,GAAK,EAC9BtC,EAAMmB,SAASoB,GAAK,EACpB7C,EAAM4B,IAAItB,GAKXL,EAAS8C,UAAUC,SAAU,EAC7B/C,EAAS8C,UAAUE,KAAOlC,gBAEzBV,EAAQ,IAAIU,mBAAuB,WAC7BU,SAASC,IAAI,GAAG,GAAG,IACzBrB,EAAM6C,YAAa,EACnB7C,EAAM8C,OAAOC,QAAQC,MAAQhD,EAAM8C,OAAOC,QAAQE,OAAS,KAC3DjD,EAAM8C,OAAOjD,OAAOqD,MAAQ,IAC5BlD,EAAM8C,OAAOjD,OAAOsD,KAAO,IAC3BnD,EAAM8C,OAAOjD,OAAOuD,MAAQ,IAC5BpD,EAAM8C,OAAOjD,OAAOwD,OAAS,IAC7BrD,EAAM8C,OAAOjD,OAAOyD,KAAO,EAC3BtD,EAAM8C,OAAOjD,OAAO0D,IAAM,IAC1BvD,EAAM8C,OAAOU,MAAQ,IACrB7D,EAAM4B,IAAIvB,EAAM,IAAIU,yBAA6BV,IACjDL,EAAM4B,IAAI,IAAIb,eAAmBV,EAAM8C,OAAOjD,SAgB9CI,EAAMwD,eAAgB,EAEtB1D,EAAO2D,UAAS,SAASC,GAClBA,aAAajD,SACZiD,EAAEd,WAAac,EAAEF,eAAgB,MAGzC3D,EAAI4D,UAAS,SAASC,GACfA,aAAajD,SACZiD,EAAEd,WAAac,EAAEF,eAAgB,MAyD7C,SAASG,IACL,IAAIC,EAAK3D,EAAM4D,WACf,IAAIC,EAAM,IAAIrD,WAAe,EAAE,EAAE,GAAGsD,eAAevD,EAAQoD,GAC3D/D,EAAIsB,SAASG,IAAIwC,GAEdjE,EAAIsB,SAASkB,IAAM,IAAMxC,EAAIsB,SAASkB,IAAM,IAC3CxC,EAAIsB,SAASoB,GAAK,EAAI1C,EAAIsB,SAASkB,EAAI,GACvCxC,EAAIuC,SAAS4B,GAAK9B,KAAKM,MAAM,GAAG,KAAOhC,EAAQ,EAAI,GAAK,IAEpDX,EAAIsB,SAASkB,IAAM,IAAMxC,EAAIsB,SAASkB,IAAM,IAChDxC,EAAIsB,SAASoB,EAAI,GAAM1C,EAAIsB,SAASkB,EAAI,GACxCxC,EAAIuC,SAAS4B,EAAI9B,KAAKM,MAAM,GAAG,KAAOhC,EAAQ,EAAI,GAAK,IAEnDX,EAAIsB,SAASkB,GAAK,IAAMxC,EAAIsB,SAASkB,EAAI,GAC1CxC,EAAIsB,SAASkB,GAAK,GACjBxC,EAAIsB,SAASkB,GAAK,GAElBxC,EAAIsB,SAASkB,EAAI,EACrB7B,IAAU,EACVX,EAAIuC,SAASG,GAAKL,KAAKI,IAEtBzC,EAAIuC,SAAS4B,EAAI,EAEtBC,sBAAsBN,GAKtBhE,EAASuE,OAAOxE,EAAME,GA/J1B+D","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = (__webpack_require__(1))(0);","module.exports = vendor_4dfd63c730cb4831af84;","module.exports = (__webpack_require__(1))(2);","import * as THREE from 'three'\r\n\r\nvar scene;\r\n\r\nfunction initScene(){\r\n    scene = new THREE.Scene();\r\n}\r\n\r\nexport {scene,initScene}","import * as THREE from 'three'\r\nimport {scene,initScene} from './initScene.js'\r\nimport OrbitControls from 'three-orbitcontrols'\r\n\r\nvar renderer,camera,controls,car,ground,light,plane;\r\nvar clock,speed = 10;\r\n\r\ninit();\r\nanimate();\r\n\r\nfunction init(){\r\n    initScene();\r\n    clock = new THREE.Clock();\r\n\r\n    renderer = new THREE.WebGLRenderer();\r\n    renderer.setSize(window.innerWidth,window.innerHeight);\r\n    renderer.setClearColor(0x888888);\r\n    document.body.appendChild(renderer.domElement);\r\n\r\n    camera = new THREE.PerspectiveCamera(50,window.innerWidth / window.innerHeight,10,1000);\r\n    camera.position.set(50,50,50);\r\n\r\n    controls = new OrbitControls(camera,renderer.domElement);\r\n\r\n    scene.add(new THREE.GridHelper(500,50,'red','white'));\r\n\r\n    car = buildBody();\r\n    car.add(new THREE.AxesHelper(10));\r\n    scene.add(car);\r\n\r\n\r\n    ground = buildGround();\r\n    scene.add(ground);\r\n\r\n    plane = new THREE.Mesh(new THREE.PlaneGeometry(500,500),new THREE.MeshPhongMaterial({color: 0x995a00}));\r\n    plane.rotation.x = -Math.PI / 2;\r\n    plane.position.y = -1;\r\n    scene.add(plane);\r\n    /*\r\n        shadow\r\n    */\r\n\r\n   renderer.shadowMap.enabled = true;\r\n   renderer.shadowMap.type = THREE.PCFShadowMap;\r\n\r\n    light = new THREE.DirectionalLight(0xffffff);\r\n    light.position.set(50,50,50);\r\n    light.castShadow = true;\r\n    light.shadow.mapSize.width = light.shadow.mapSize.height = 1024;\r\n    light.shadow.camera.left = -180;\r\n    light.shadow.camera.top = -180;\r\n    light.shadow.camera.right = 180;\r\n    light.shadow.camera.bottom = 180;\r\n    light.shadow.camera.near = 1;\r\n    light.shadow.camera.far = 400;\r\n    light.shadow.bias = -0.01;\r\n    scene.add(light,new THREE.DirectionalLightHelper(light));\r\n    scene.add(new THREE.CameraHelper(light.shadow.camera));\r\n/*\r\nvar light2 = new THREE.DirectionalLight(0xffffff);\r\n  light2.position.set(-80, 160, 80);\r\n  light2.castShadow = true;\r\n  light2.shadow.camera.left = -180;\r\n  light2.shadow.camera.top = -180;\r\n  light2.shadow.camera.right = 180;\r\n  light2.shadow.camera.bottom = 180;\r\n  light2.shadow.camera.near = 1;\r\n  light2.shadow.camera.far = 300;\r\n  //light2.target = mesh2;\r\n  light2.shadow.mapSize.width = light2.shadow.mapSize.height = 1024;\r\n  scene.add(light2);\r\n  light2.shadow.bias = -.01*/\r\n\r\n    plane.receiveShadow = true;\r\n\r\n    ground.traverse(function(e){\r\n        if(e instanceof THREE.Mesh)\r\n            e.castShadow = e.receiveShadow = true;\r\n    });\r\n\r\n    car.traverse(function(e){\r\n        if(e instanceof THREE.Mesh)\r\n            e.castShadow = e.receiveShadow = true;\r\n    });\r\n\r\n}\r\n\r\nfunction buildBody(){\r\n    let geo = new THREE.Geometry();\r\n    geo.vertices.push(\r\n        new THREE.Vector3(5,0,-5),\r\n        new THREE.Vector3(5,0,5),\r\n        new THREE.Vector3(5,5,0),\r\n        new THREE.Vector3(-5,0,0)\r\n    );\r\n\r\n    let face3 = new THREE.Face3(0,2,1);\r\n    geo.faces.push(face3);\r\n    face3 = new THREE.Face3(1,2,3);\r\n    geo.faces.push(face3);\r\n    face3 = new THREE.Face3(0,3,2);\r\n    geo.faces.push(face3);\r\n    face3 = new THREE.Face3(0,1,3);\r\n    geo.faces.push(face3);\r\n\r\n    geo.computeBoundingSphere();\r\n    geo.computeFaceNormals();\r\n    //geo.computeVertexNormals();\r\n\r\n    var mesh = new THREE.Mesh(geo,new THREE.MeshPhongMaterial({color: 0xff0000}));\r\n\r\n\r\n    return mesh;\r\n}\r\n\r\nfunction buildGround(){\r\n    let ground = new THREE.Object3D();\r\n    let mat = new THREE.MeshPhongMaterial({color: 0xffffff, side: THREE.DoubleSide});\r\n    let g1 = new THREE.Mesh(new THREE.PlaneGeometry(20,30),mat);\r\n    let g11 = g1.clone();\r\n    let g12 = g1.clone();\r\n    let g2 = new THREE.Mesh(new THREE.PlaneGeometry(Math.sqrt(20*20+10*10),30),mat);\r\n    let g3 = new THREE.Mesh(new THREE.PlaneGeometry(Math.sqrt(10*10+10*10),30),mat);\r\n\r\n    g1.position.set(-10,0,0);\r\n    g11.position.set(-40,10,0);\r\n    g12.position.set(-80,0,0);\r\n    g2.position.set(-60,5,0);\r\n    g3.position.set(-25,5,0);\r\n\r\n    g1.rotation.x = g11.rotation.x = g12.rotation.x = \r\n        g2.rotation.x = g3.rotation.x = -Math.PI / 2;\r\n    g2.rotation.y = -Math.atan2(10,20);\r\n    g3.rotation.y = +Math.atan2(10,10);\r\n\r\n    ground.add(g1,g11,g12,g2,g3);\r\n    return ground;\r\n}\r\n\r\nfunction animate(){\r\n    let dt = clock.getDelta();\r\n    let val = new THREE.Vector3(-1,0,0).multiplyScalar(speed * dt);\r\n    car.position.add(val);\r\n\r\n    if(car.position.x <= -20 && car.position.x >= -30){\r\n        car.position.y = -1 * car.position.x - 20;\r\n        car.rotation.z = -Math.atan2(10,10) * (speed > 0 ? 1 : -1);\r\n    }\r\n    else if(car.position.x <= -50 && car.position.x >= -70){\r\n        car.position.y = 0.5 * car.position.x + 35;\r\n        car.rotation.z = Math.atan2(10,20) * (speed > 0 ? 1 : -1);;\r\n    }\r\n    else if(car.position.x < -90 || car.position.x > 0){\r\n        if(car.position.x < -90)\r\n            car.position.x = -90;\r\n        else\r\n            car.position.x = 0;\r\n        speed *= -1;\r\n        car.rotation.y += Math.PI;\r\n    }\r\n    else car.rotation.z = 0;\r\n\r\n    requestAnimationFrame(animate);\r\n    render();\r\n}\r\n\r\nfunction render(){\r\n    renderer.render(scene,camera);\r\n}"],"sourceRoot":""}